"""
The command line module provides the main function of the application.
"""
import sys
import json
import click
from smelly_python.code_smell import CodeSmell
from .generator.webpage_generator import generate_webpage


@click.command()
@click.option('--file', help='Specify the json file generated by pylint.')
def main(file):
    """
    Main command line interface.
    Takes the first command line argument to be the json generated by pylint.
    """
    with open(file, 'r', encoding='utf-8') as file:
        dict_data = json.load(file)
        code_smells = CodeSmell.convert_dict(dict_data)
        print(code_smells)
        generate_webpage(code_smells)


if __name__ == '__main__':
    main()
