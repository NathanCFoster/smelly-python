"""
The command line module provides the main function of the application.
"""
import sys
import json
from smelly_python.code_smell import CodeSmell
from .generator.webpage_generator import generate_webpage


def main():
    """
    Main command line interface.
    Takes the first command line argument to be the json generated by pylint.
    """
    print(f'Argument count: {len(sys.argv)}')
    if len(sys.argv) != 2:
        print('Insufficient amount parameters provided')
        sys.exit(1)
    with open(sys.argv[1], 'r', encoding='utf-8') as file:
        dict_data = json.load(file)
        code_smells = CodeSmell.convert_dict(dict_data)
        print(code_smells)
        generate_webpage(code_smells)


if __name__ == '__main__':
    main()
